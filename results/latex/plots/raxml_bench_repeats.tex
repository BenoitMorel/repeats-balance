 
\documentclass[a4paper]{article}
\usepackage{pgfplots}
\usepackage{tikz}
\usepackage{import}
\usepackage[font=scriptsize,labelfont=bf]{caption}
\usepackage{array}
\usepackage{amsmath}
\usepackage{listings}
\lstset{basicstyle=\ttfamily}
\begin{document}


\newcommand*{\figuretitle}[1]{%
    {\centering%   <--------  will only affect the title because of the grouping (by the
    \textbf{#1}%              braces before \centering and behind \medskip). If you remove
    \par\medskip}%            these braces the whole body of a {figure} env will be centered.
}


\title{Raxml repeats benchmarks}
\maketitle


\section{Execution time}

\noindent We run raxml for each dataset with and without the repeats option, and compare the execution times.\\


\noindent Speedup is calculated as follow :  
$$ speedup = \frac{time_{tipinner}}{time_{repeats}}$$

When we don't indicate times, the cluster cancelled the jobs before the end (after 24h). We then compare the speedup at the last reached step. \newline

Raxml commands used (repeats, repeats with jemalloc, tipinner):
\lstset{language=sh}
\begin{lstlisting}
  $ LD_PRELOAD=libjemalloc.so mpirun ./raxml-ng-mpi --seed=42 --msa data.phy --model data.part
   --simd AVX --threads 1  --search --repeats on
  $ LD_PRELOAD=libjemalloc.so mpirun ./raxml-ng-mpi --seed=42 --msa data.phy --model data.part
   --simd AVX --threads 1  --search 
\end{lstlisting}


\begin{tabular}{|l|c|c|c|c|c|c|c|}
\hline dataset                    & taxas & sites    & partitions & type & $time_{repeats}$ & $time_{tipinner}$ & speedup\\
\hline 404                        & 404   &  7444    & 11         & DNA  & 457s     &  755s     & 1.65  \\
\hline 1kite\_science2013         & 144   &  371434  & 50         & DNA  & ?        &  ?        & ?  \\
\hline 1kite\_hyme                & 174   &  2248590 & 4116       & DNA  & ?        &  ?        & ? \\
\hline Antl\_1\_1\_nt             & 40    &  522173  & 658        & DNA  & 1254s    &  1668s    & 1.3  \\
\hline Antl\_1\_1\_aa             & 40    &  762438  & 659        & prot & ?        &  ?        & ?\\
\hline para\_1\_nt                & 193   &  1514275 & 3714       & DNA  & ?       &  ?        & ?  \\
\hline 
\end{tabular}\newline
\newline


\section{Load balancing}

We define
$$busy\ ratio = (1 - \frac{waiting\ time\ in\ reduce\ operations}{elapsed\ time}) * 100$$

It directly gives the speedup we could get from a perfect load balancing.\newline

I will recompute this table later with mpi.


%\begin{tabular}{|l|c|c|c|c|c|c|c|}
%\hline dataset                    & taxas & sites    & parts & type  & $ratio_{repeats}$ & $ratio_{jemrepeats}$ & $ratio_{tipinner}$\\
%\hline 404                        & 404   &  7444    & 11    & DNA  & 86\%     & 85\%   & 86\%  \\
%\hline 1kite\_science             & 144   &  371434  & 50    & DNA  & 83\%     & 92\%    & 83\%  \\
%\hline 1kite\_hyme                & 174   &  2248590 & 4116  & DNA  & 93\%     & ?\%    & 92\%  \\
%\hline Antl\_1\_1\_nt             & 40    &  522173  & 658   & DNA  & ?\%      & 96\%    & ?\%  \\
%\hline Antl\_1\_1\_aa             & 40    &  762438  & 659   & prot & 96\%     & 93\%    & 89\%  \\
%\hline para\_1\_nt                & 193   &  1514275 & 3714  & DNA  & 92\%     & ?\%    & 90\%  \\
%\hline 
%\end{tabular}\newline
%\newline


%para\_1\_aa ne passe pas en memoire

\end{document}